trigger:
  branches:
    include:
    - main
  paths:
    include:
    - /application/HelloService/**
resources:
- repo: self
stages:
- stage: BuildStage
  displayName: Build
  dependsOn: 
  jobs:
  - job: BuildStage
    displayName: Build
    pool:
      vmImage: ubuntu-latest
    steps:
    - task: CmdLine@2
      inputs:
        script: |2

          echo "This step would typically call 'make', but any build steps could go here."
          ls -l
- stage: ReleaseStage
  displayName: Release
  dependsOn: BuildStage
  jobs:
  - job: ReleaseStage
    displayName: Release
    pool:
      vmImage: ubuntu-latest
    steps:
    - task: CmdLine@2
      inputs:
        script: |2

          echo "Here we would run commands to build and push a docker image to ACR; e.g. `docker build`, `acr login`, `docker push`."
          ls -l
- stage: CellDeployWave1
  displayName: Deploy (Wave 1)
  dependsOn: ReleaseStage
  jobs:
  - job: CellDeployalpha
    displayName: alpha
    pool:
      vmImage: ubuntu-latest
    steps:
    - task: CmdLine@2
      inputs:
        script: |2

          echo "(alpha) Here we would run commands to deploy infrastructure via CDK for TerraForm."
          ls -l
- stage: CellDeployWave2
  displayName: Deploy (Wave 2)
  dependsOn: ReleaseStage
  jobs:
  - job: CellDeploywestus3_1
    displayName: westus3_1
    pool:
      vmImage: ubuntu-latest
    steps:
    - task: CmdLine@2
      inputs:
        script: |2

          echo "(westus3_1) Here we would run commands to deploy infrastructure via CDK for TerraForm."
          ls -l
  - job: CellDeploysouthcentralus_1
    displayName: southcentralus_1
    pool:
      vmImage: ubuntu-latest
    steps:
    - task: CmdLine@2
      inputs:
        script: |2

          echo "(southcentralus_1) Here we would run commands to deploy infrastructure via CDK for TerraForm."
          ls -l
- stage: CellDeployWave3
  displayName: Deploy (Wave 3)
  dependsOn: ReleaseStage
  jobs:
  - job: CellDeploywestus2_1
    displayName: westus2_1
    pool:
      vmImage: ubuntu-latest
    steps:
    - task: CmdLine@2
      inputs:
        script: |2

          echo "(westus2_1) Here we would run commands to deploy infrastructure via CDK for TerraForm."
          ls -l
  - job: CellDeployeastus1_1
    displayName: eastus1_1
    pool:
      vmImage: ubuntu-latest
    steps:
    - task: CmdLine@2
      inputs:
        script: |2

          echo "(eastus1_1) Here we would run commands to deploy infrastructure via CDK for TerraForm."
          ls -l
